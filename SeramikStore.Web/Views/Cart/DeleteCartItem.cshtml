@using Microsoft.Extensions.Localization
@using SeramikStore.Web.Localization
@using System.Globalization
@model SeramikStore.Services.DTOs.CartItemDto
@inject IStringLocalizer<CartResource> L

@{
    ViewData["Title"] = L["Sepetten Sil"];
    var culture = CultureInfo.CurrentCulture;
}

<div class="container mt-5" style="max-width:720px;">

    <div class="card shadow-sm border-0 rounded-4 p-4">

        <!-- Başlık -->
        <p class="text-muted fs-5 mb-4">
            @L["Bu ürünü sepetinizden silmek istediğinize emin misiniz?"]
        </p>

        <!-- Ürün Kartı -->
        <div class="d-flex align-items-center border rounded-4 p-3 product-box">

            <!-- Ürün Görsel -->
            <div class="product-image">
                <img src="@(string.IsNullOrEmpty(Model.MainImagePath) ? "/images/no-image.png" : Model.MainImagePath)"
                     alt="@Model.ProductName" />
            </div>

            <!-- Ürün Bilgi -->
            <div class="flex-grow-1 ms-4">
                <div class="fw-semibold text-dark mb-1">
                    @Model.ProductName
                </div>
                <div class="text-muted small">
                    @L["Ürün Kodu"]: @Model.ProductCode
                </div>
            </div>

            <!-- Sağ Alan (Adet + Fiyat) -->
            <div class="text-end ms-4 right-area">
                <div class="fw-semibold text-dark">
                    @Model.Quantity @L["Adet"]
                </div>
                <div class="fw-bold fs-5 mt-2">
                    @Model.LineTotal.ToString("N2", culture)
                    @Model.CurrencyCode.ToString().ToUpper()
                </div>
            </div>

        </div>

        <!-- Butonlar -->
        <form asp-action="DeleteCartItem" method="post" class="mt-4">
            @Html.AntiForgeryToken()
            <input type="hidden" asp-for="Id" />

            <div class="d-flex justify-content-end gap-3">

                <a asp-action="Summary"
                   class="btn btn-outline-secondary rounded-pill px-4 d-flex align-items-center">
                    <i class="fa-regular fa-circle-left fs-4 me-2"></i>
                    @L["Vazgeç"]
                </a>

                <button type="submit"
                        class="btn btn-danger rounded-pill px-4 d-flex align-items-center">
                    <i class="fa-regular fa-trash-can me-2"></i>
                    @L["Sil"]
                </button>

            </div>
        </form>

    </div>
</div>


<style>

    /* Ürün kutusu */
    .product-box {
        transition: background-color 0.2s ease;
    }

/*         .product-box:hover {
            background-color: #fafafa;
        } */

    /* Resim sabit boyut (zıplama yok) */
    .product-image {
        width: 120px;
        height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

        .product-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
        }

    /* Sağ alan sabit genişlik */
    .right-area {
        min-width: 140px;
    }

</style>
