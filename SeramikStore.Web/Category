// <auto-generated>
// This file is generated. Do not edit manually.
// Generated at      : 2026-01-18 22:50:03
// Generated at (UTC): 2026-01-18 19:50:03
// Machine: DESKTOP-IITN2G2
// Generator: EntityCreator v1.0
// Class Name: ControllerWriter
// </auto-generated>

using Microsoft.AspNetCore.Mvc;
using Category;
using SeramikStore.Contracts.Category;

namespace SeramikStore.Web.Category
{
    public partial class CategoryController : Controller
    {
        private readonly ICategoryService _service;

        public CategoryController(ICategoryService service)
        {
            _service = service;
        }

        // LIST
        public IActionResult Index()
        {
            var list = _service.List();
            var vm = list.Select(x => new CategoryListViewModel
            {
                Id = x.Id,
                Name = x.Name,
                IsActive = x.IsActive
            }).ToList();

            return View(vm);
        }

        // CREATE (GET)
        public IActionResult Create()
        {
            return View(new CategoryCreateViewModel());
        }

        // CREATE (POST)
        [HttpPost]
        [ValidateAntiForgeryToken]
        public IActionResult Create(CategoryCreateViewModel vm)
        {
            if (!ModelState.IsValid)
                return View(vm);

            _service.Create(new CategoryCreateDto
            {
                Name = vm.Name
            });

            return RedirectToAction(nameof(Index));
        }

        // EDIT (GET)
        public IActionResult Edit(int id)
        {
            var item = _service.GetById(id);
            if (item == null)
                return NotFound();

            return View(new CategoryUpdateViewModel
            {
                Id = item.Id,
                Name = item.Name,
                IsActive = item.IsActive
            });
        }

        // EDIT (POST)
        [HttpPost]
        [ValidateAntiForgeryToken]
        public IActionResult Edit(CategoryUpdateViewModel vm)
        {
            if (!ModelState.IsValid)
                return View(vm);

            _service.Update(new CategoryUpdateDto
            {
                Id = vm.Id,
                Name = vm.Name,
                IsActive = vm.IsActive
            });

            return RedirectToAction(nameof(Index));
        }

        // DELETE
        public IActionResult Delete(int id)
        {
            _service.Delete(id);
            return RedirectToAction(nameof(Index));
        }
    }
}
